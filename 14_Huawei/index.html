<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Huawei</title>
  <link rel="stylesheet" href="./css/reset.css">
  <link rel="stylesheet" href="css/iconfont.css">
  <link rel="stylesheet" href="css/common.css">
  <link rel="stylesheet" href="css/index.css">
</head>
<body>
<!-- Header start  -->
  <div class="header">
    <div class="wrap">
      <ul class="header-left">
        <li><a href="#">Huawei Mall</a><span>|</span></li>
        <li><a href="#">Promotion Code</a><span>|</span></li>
        <li><a href="#">Select Region</a><span>|</span></li>
        <li>
          <a href="#">Download App</a><span>|</span>
          <div class="download">
            <a href="#">
              <img src="img/QR code.PNG" alt="">
              <p>Huawei App</p>
            </a>
          </div>
          <div class="triangle"></div>
        </li>
        <li><a href="#">About Us</a><span>|</span></li>
      </ul>
      <ul class="header-right">
        <li><a href="#">Login</a><span>|</span></li>
        <li><a href="#">Register Now</a><span>|</span></li>
        <li><a href="#">Notification</a></li>
        <li class="cart">
          <a href="#">
            <i class="iconfont">&#xe653;</i>Shopping Cart
          </a>
          <div class="cart-list">
            There is nothing in the shoping cart
          </div>
        </li>
      </ul>
    </div>
  </div>
<!-- Header end -->

<!-- Navigator start -->
  <div class="nav">
    <div class="wrap">
      <div class="logo">
        <a href="#">
          <img src="img/logo.png" alt="">
        </a>
      </div>
      <div class="nav-bar">
        <ul>
          <li>
            <a href="#">Huawei Mobile</a>
            <div class="nav-bar-list">
              <div class="wrap">
                <ul>
                  <li>
                    <a href="#">
                      <div class="nav-img-box">
                        <img src="img/product1.png" alt="">
                      </div>
                      <p>Huawei Mobile</p>
                      <p>Start From $799</p>
                    </a>
                  </li>
                  <li>
                    <a href="#">
                      <div class="nav-img-box">
                        <img src="img/product2.png" alt="">
                      </div>
                      <p>Huawei Mobile</p>
                      <p>Start From $599</p>
                    </a>
                  </li>
                </ul>
              </div>
            </div>
          </li>
          <li><a href="#">Huawei Laptop</a></li>
          <li><a href="#">Home product</a></li>
          <li><a href="#">Business product</a></li>
          <li><a href="#">Support</a></li>
          <li><a href="#">Partner&Developer</a></li>
          </ul>
        </div>
        <div class="search">
          <input type="text" placeholder="Huawei Mobile">
          <button type="button" class="iconfont">&#xe63d;</button>
          <div class="search-list">
            <a href="#">Huawei Mobile</a>
            <a href="#">Huawei Mobile</a>
            <a href="#">Huawei Mobile</a>
          </div>
      </div>
    </div>
  </div>
<!-- Navigator end -->

<!-- Banner start -->
  <div class="banner">
    <div class="wrap">
      <div class="banner-box">
        <ul class="images">
        </ul>
        <div class="indicator">
        </div>
        <div class="slide">
          <ul>
            <li>
                <a href="#">Mobile</a><i class="iconfont">&#xe616;</i>
                <div class="slide-list">
                  <ul>
                    <li>
                        <a href="#">
                            <img src="img/product3.png" alt="">
                            <span>Xiaomi Civi</span>
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <img src="img/product3.png" alt="">
                            <span>Xiaomi Civi</span>
                        </a>
                    </li>
                  </ul>
                  <ul>
                    <li>
                        <a href="#">
                            <img src="img/product3.png" alt="">
                            <span>Xiaomi Civi</span>
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <img src="img/product3.png" alt="">
                            <span>Xiaomi Civi</span>
                        </a>
                    </li>
                  </ul>
                  <ul>
                    <li>
                        <a href="#">
                            <img src="img/product3.png" alt="">
                            <span>Xiaomi Civi</span>
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <img src="img/product3.png" alt="">
                            <span>Xiaomi Civi</span>
                        </a>
                    </li>
                  </ul>
                </div>
            </li>
            <li>
              <a href="#">Mobile</a><i class="iconfont">&#xe616;</i>
              <div class="slide-list">
                <ul>
                  <li>
                      <a href="#">
                          <img src="img/product3.png" alt="">
                          <span>Xiaomi Civi</span>
                      </a>
                  </li>
                  <li>
                      <a href="#">
                          <img src="img/product3.png" alt="">
                          <span>Xiaomi Civi</span>
                      </a>
                  </li>
                </ul>
                <ul>
                  <li>
                      <a href="#">
                          <img src="img/product3.png" alt="">
                          <span>Xiaomi Civi</span>
                      </a>
                  </li>
                  <li>
                      <a href="#">
                          <img src="img/product3.png" alt="">
                          <span>Xiaomi Civi</span>
                      </a>
                  </li>
                </ul>
                <ul>
                  <li>
                      <a href="#">
                          <img src="img/product3.png" alt="">
                          <span>Xiaomi Civi</span>
                      </a>
                  </li>
                  <li>
                      <a href="#">
                          <img src="img/product3.png" alt="">
                          <span>Xiaomi Civi</span>
                      </a>
                  </li>
                </ul>
              </div>
            </li>
            <li><a href="#">Laptop</a><i class="iconfont">&#xe616;</i></li>
            <li><a href="#">Laptop</a><i class="iconfont">&#xe616;</i></li>
            <li><a href="#">Mobile</a><i class="iconfont">&#xe616;</i></li>
            <li><a href="#">Mobile</a><i class="iconfont">&#xe616;</i></li>
            <li><a href="#">Mobile</a><i class="iconfont">&#xe616;</i></li>
            <li><a href="#">Mobile</a><i class="iconfont">&#xe616;</i></li>
            <li><a href="#">Mobile</a><i class="iconfont">&#xe616;</i></li>
          </ul>
        </div>
      </div>
    </div>
  </div>
<!-- Banner end -->

  <!-- Laptoop advertisement start -->
  <div class="container">
    <div class="wrap">
      <div class="home-banner-box">
        <a href="#">
          <img src="img/Home banner.jpg" alt="">
        </a>
      </div>
      <h2 class="title">Laptop
        <a href="#" class="more">More <i class="iconfont">&#xe658;</i></a>
      </h2>
      <div class="operation">
        <ul class="row category">
          <li class="item">Category:</li>
          <li class="item">Laptop</li>
          <li class="item">Desktop</li>
          <li class="item">Tablet</li>
        </ul>
        <ul class="row discount">
          <li class="item">Offer Service:</li>
          <li class="item">In-Stock</li>
          <li class="item">Interest Free</li>
          <li class="item">Promotion</li>
        </ul>
        <ul class="row sort">
          <li class="item">Sort:</li>
          <li class="item active" data-key="default">Integration</li>
          <li class="item" data-key="goodRate">Good Rate</li>
          <li class="item" data-key="rateCount">Rate Count</li>
          <li class="item" data-key="price">Price</li>
        </ul>
      </div>
      <ul class="products">
      </ul>
    </div>
  </div>
  <!-- Laptoop advertisement end -->

  <!--Footer start-->
<div class="footer">
  <div class="wrap">
    <div class="footer-server">
      <ul>
        <li><a href="#"><i class="iconfont">&#xe629;</i>Service Reservation</a></li>
        <li><a href="#"><i class="iconfont">&#xe629;</i>Service Reservation</a></li>
        <li><a href="#"><i class="iconfont">&#xe629;</i>Service Reservation</a></li>
        <li><a href="#"><i class="iconfont">&#xe629;</i>Service Reservation</a></li>
        <li><a href="#"><i class="iconfont">&#xe629;</i>Service Reservation</a></li>
      </ul>
    </div>
    <div class="footer-links">
      <ul>
        <li>Help Center</li>
        <li><a href="#">Account Management</a></li>
        <li><a href="#">Account Management</a></li>
        <li><a href="#">Account Management</a></li>
      </ul>
      <ul>
        <li>Help Center</li>
        <li><a href="#">Account Management</a></li>
        <li><a href="#">Account Management</a></li>
        <li><a href="#">Account Management</a></li>
      </ul>
      <ul>
        <li>Help Center</li>
        <li><a href="#">Account Management</a></li>
        <li><a href="#">Account Management</a></li>
        <li><a href="#">Account Management</a></li>
      </ul>
      <ul>
        <li>Help Center</li>
        <li><a href="#">Account Management</a></li>
        <li><a href="#">Account Management</a></li>
        <li><a href="#">Account Management</a></li>
      </ul>
      <ul>
        <li>Help Center</li>
        <li><a href="#">Account Management</a></li>
        <li><a href="#">Account Management</a></li>
        <li><a href="#">Account Management</a></li>
      </ul>
      <ul>
        <li>Help Center</li>
        <li><a href="#">Account Management</a></li>
        <li><a href="#">Account Management</a></li>
        <li><a href="#">Account Management</a></li>
      </ul>
      <div class="contact">
        <p class="tel">02-9100-5678</p>
        <p class="time">8:00-18:00（Working Day）</p>
        <a href="#" class="cs"><i class="iconfont">&#xe710;</i>Customer Service</a>
        <p class="follow">
          Sbuscribe：
          <span class="wb"></span>
          <span class="wx"></span>
          <img src="img/QR code.PNG" alt="" class="wx-img">
        </p>
      </div>
    </div>
  </div>
</div>
<!--Footer end-->

  <script src="./json/banner_data.js"></script>
  <script src="./json/product_data.js"></script>
  <script src="./js/utils.js"></script>
  <!-- Banner JS start -->
  <script>
    var bannersCount = banners.length

    // Banner server URL
    var bannerServerURL = "https://res.vmallres.com/"

    // Add images content
    var imagesEl = document.querySelector(".images")
    var activeItemEl = null
    for (var i = 0; i < banners.length; i++) {
      var banner = banners[i]
      var itemEl = document.createElement("li")
      itemEl.classList.add("item")
      if (i === 0) {
        itemEl.classList.add("active")
        activeItemEl = itemEl
      }
      imagesEl.append(itemEl)
      var imgEl = document.createElement("img")
      imgEl.src = `${bannerServerURL}${banner.imgUrl}`
      itemEl.append(imgEl)
    }

    //Add indicator content
    var indicatorEl = document.querySelector(".indicator")
    for (var i = 0; i < bannersCount; i++) {
      var itemEl = document.createElement("div")
      itemEl.classList.add("item")
      if (i === 0) {
        itemEl.classList.add("active")
      }
      indicatorEl.append(itemEl)

      //Add click event listener
      var previousIndex = 0
      var currentIndex = 0
      itemEl.index = i
      itemEl.onclick = function() {
        previousIndex = currentIndex
        currentIndex = this.index
        switchBannerItem()
      }
    }
    // Auto display banner
    var timer = null
    startTimer()

    // Stop auto display banner
    var bannerEl = document.querySelector(".banner")
    bannerEl.onmouseenter = function() {
      stopTimer()
    }
    bannerEl.onmouseleave = function() {
      startTimer()
    }
    
    // Encapsulation display next banner
    function nextSwitch() {
      previousIndex = currentIndex
      currentIndex++
      if (currentIndex === bannersCount) {
        currentIndex = 0
      }
      switchBannerItem()
    }

    // Encapsulation switch banner function
    function switchBannerItem() {
      var currentItemEl = imagesEl.children[currentIndex]
      var previousItemEl = imagesEl.children[previousIndex]
      previousItemEl.classList.remove("active")
      currentItemEl.classList.add("active")

      var currentInItemEl = indicatorEl.children[currentIndex]
      var previousInItemEl = indicatorEl.children[previousIndex]
      previousInItemEl.classList.remove("active")
      currentInItemEl.classList.add("active")
    }

    //Encapsulation timer function
    function startTimer() {
      timer = setInterval(function() {
        nextSwitch()
      }, 3000);
    }
    function stopTimer() {
      clearInterval(timer)
    }
  
  </script>
  <!-- Banner JS end -->

  <!-- Operation JS start -->
  <script>
    var serverURL = "https://res.vmallres.com/pimages"
    var productsEl = document.querySelector(".products")
    var operationEl = document.querySelector(".operation")
    var discountEl = operationEl.querySelector(".discount")

    // Achieve discountItemEl and add event listener
    var discountFilters = []
    for (var i = 1; i < discountEl.children.length; i++) {
      var discountItemEl = discountEl.children[i]
      discountItemEl.onclick = function() {
        this.classList.toggle("active")
        if (this.classList.contains("active")) {
          discountFilters.push(this.textContent.trim())
        } else {
          var filterItem = this.textContent.trim()
          var filterIndex = discountFilters.findIndex(function(item) {
            return item === filterItem
          })
          discountFilters.splice(filterIndex, 1)
        }
        filterResultListAction()
      }
    }
    
    // Add event listener for sorting
    var sortEl = document.querySelector(".sort")
    var activeItemEl = sortEl.querySelector(".active")
    for (var i = 1; i < sortEl.children.length; i++) {
      var sortItemEl = sortEl.children[i]
      sortItemEl.index = i
      sortItemEl.onclick = function() {
        activeItemEl.classList.remove("active")
        this.classList.add("active")
        activeItemEl = this
        var sortKey = this.dataset.key
        sortResultListAction(sortKey)
      }
    }

    // Encapsulation filterResult list
    var showResultList = [].concat(resultList)
    function filterResultListAction() {
      showResultList = resultList.filter(function(item) {
        var isFlag = true
        for (var filterItem of discountFilters) {
          if (!item.services.includes(filterItem)) {
            isFlag = false
            break
          }
        }
        return isFlag
      })
      showResultListAction()
    }

    showResultListAction()
    //Encapsulation show result list
    function showResultListAction() {
      productsEl.innerHTML = ""
      for (var i = 0; i < showResultList.length; i++) {
        var resultItem = showResultList[i]
        var itemEl = document.createElement("li")
        itemEl.classList.add("item")
        var serviceString = ""
        for (var label of resultItem.promoLabels) {
          serviceString += `<span class="tip">${label}</span>`
        }

        itemEl.innerHTML = `
          <a href="#">
            <img class="album" src="${serverURL}${resultItem.photoPath}428_428_${resultItem.photoName}" alt="">
            <div class="name">${resultItem.name}</div>
            <div class="discount">${resultItem.promotionInfo}</div>
            <div class="price">¥${resultItem.price}</div>
            <div class="service">
              ${serviceString}
            </div>
            <div class="comment">
              <span>${resultItem.rateCount} Review</span>
              <span>${resultItem.goodRate}% Good Rate</span>
            </div>
          </a>
        `
        productsEl.append(itemEl)
      }
      addProductsEmptyItem()
    }

    // Encapsulation key filter function
    function sortResultListAction(key) {
      if (key === "default") {
        filterResultListAction()
      } else {
        showResultList.sort(function(item1, item2) {
          return item2[key] - item1[key]
        })
      }
      showResultListAction()
    }
  </script>
  <!-- Operation JS end -->
</body>
</html>
